<%
    //capitalize the first letter for the <h1> tag
    
    function capitalize(str){
         var firstLetterCapitalized = str.charAt(0).toUpperCase();
         return firstLetterCapitalized + str.substr(1);
    }

    //test to see if the route is a single-listing
    
    function testForSingleListing(currentRoute){
        if( currentRoute.indexOf('listing')>-1 ) {
            console.log('singleListing');
            return true;
            
        }  else {
                console.log('productsListing')
                return false
        }
           
    }

    var currentRoute = window.location.hash

%>

<section class="my-breadcrumb">
		
        <ol class="breadcrumb">
            <li><a href="#">Home</a>
            </li>
			
            <%data.currentCategoryTree.forEach(function(categoryName, index){
                if( index !== data.currentCategoryTree.length-1 ){     
                %>
                    <%if(categoryName==='All Products'){
                        var hlink="#/products"}
                        else{ 
                            var num = _.findKey(data.categoryLabels,function(label){
                                    return label === categoryName
                                })
                    
                            var hlink = "/#/products/category/"+ num
                            
                            } %>

                <li><a href="<%=hlink||'/#'%>"><%=categoryName%></a>
                  
                <%} else if ( index === data.currentCategoryTree.length - 1) 
                { %>            
                
                <li class="active"><span><%=capitalize(categoryName)%></span></li>

                <%}%>

            <%})%>
        </ol>
</section>

<%console.log(data)%>
<h1 class='multi-description <%=testForSingleListing(currentRoute)? 'inactive' : 'active' %>'><%=data.categoryLabels[data.currentCategory]||'Product'%> Listings</h1>